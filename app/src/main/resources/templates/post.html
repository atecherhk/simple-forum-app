<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<body>
    <div class="container">
        <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
            <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none"/>

            <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
                <li>
                    <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
                        <img src="https://cdn.icon-icons.com/icons2/2620/PNG/512/among_us_player_red_icon_156942.png" width="50" height="50"/>
                    </a>
                </li>
            </ul>

            <div class="col-md-3 text-end">
                <a class="btn btn-dark" th:href="@{~/post/create}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-plus" viewBox="0 0 16 16">
                        <path d="M8 6.5a.5.5 0 0 1 .5.5v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 .5-.5z"/>
                        <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"/>
                    </svg>
                </a>
            </div>
        </header>
    </div>
    <div class="container">
        <section style="background-color: #f7f6f6;">
            <div class="container my-5 py-5 text-dark">
                <div class="row d-flex justify-content-center mb-2">
                    <div class="col-md-12 col-lg-10 col-xl-8">
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="d-flex flex-start align-items-center">
                                    <img src="https://i.redd.it/t5qvkq26qbw51.png" class="mr-3 rounded-circle" width="50" height="50" alt="User" />
                                    <div class="w-100">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="text-primary fw-bold mb-0">
                                                # [[${post.id}]]
                                                <span class="text-dark ms-2">[[${post.title}]]</span>
                                            </h6>
                                            <p class="mb-0 text-primary">樓主</p>
                                        </div>
                                    </div>
                                </div>
                                <p class="text-dark mt-2 ms-2">[[${post.content}]]</p>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5 class="text-dark mb-0">Comments ([[${totalCount}]])</h5>
                            <div class="card">
                                <a class="btn btn-dark" th:href="@{'~/post/' + ${post.id} + '/comment'}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-reply" viewBox="0 0 16 16">
                                        <path d="M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z"/>
                                    </svg>
                                </a>
                            </div>
                        </div>

                        <div th:if="${totalCount} == 0">
                            <span class="text-dark ms-2">No comment yet &#9203; </span>
                        </div>
                        <div th:if="${totalCount} > 0" class="card ">
                            <div th:each="comment,iter : ${comments}" class="card-body">
                                <div class="d-flex flex-start">
                                    <img src="https://e0.pxfuel.com/wallpapers/344/547/desktop-wallpaper-among-us-green-icon-sabotage-among-us-wiki-fandom.jpg" class="mr-3 rounded-circle" width="50" height="40" alt="User" />
                                    <div class="w-100">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="text-primary fw-bold mb-0">
                                                回覆 # [[${( pageIndex - 1) * 5 + (iter.index + 1)}]]
                                                <span class="text-dark ms-2">[[${comment.comment}]]</span>
                                            </h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <ul th:if="${totalCount} > 0" class="pagination pagination-sm pagination-circle justify-content-center mb-0">
                    <li class="page-item">
                        <a th:if="${pageIndex} > 1" class="page-link page-link-prev" th:href="@{'?pageIndex=' + ${pageIndex - 1}}" aria-label="Previous">
                            <span aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                                </svg>
                            </span>Prev
                        </a>
                    </li>

                    <li th:if="${pageIndex} > 3" class="page-item"><a class="page-link" th:href="@{'?pageIndex=' + ${pageIndex - 3}}">[[${pageIndex} - 3]]</a></li>
                    <li th:if="${pageIndex} > 2" class="page-item"><a class="page-link" th:href="@{'?pageIndex=' + ${pageIndex - 2}}">[[${pageIndex} - 2]]</a></li>
                    <li th:if="${pageIndex} > 1" class="page-item"><a class="page-link" th:href="@{'?pageIndex=' + ${pageIndex - 1}}">[[${pageIndex} - 1]]</a></li>
                    <li class="page-item active" aria-current="page"><a class="page-link" href="#">[[${pageIndex}]]</a></li>
                    <li th:if="${pageIndex} + 1 <= ${totalPages}" class="page-item"><a class="page-link" th:href="@{'?pageIndex=' + ${pageIndex + 1}}">[[${pageIndex} + 1]]</a></li>
                    <li th:if="${pageIndex} + 2 <= ${totalPages}" class="page-item"><a class="page-link" th:href="@{'?pageIndex=' + ${pageIndex + 2}}">[[${pageIndex} + 2]]</a></li>
                    <li th:if="${pageIndex} + 3 <= ${totalPages}" class="page-item"><a class="page-link" th:href="@{'?pageIndex=' + ${pageIndex + 3}}">[[${pageIndex} + 3]]</a></li>
                    <li class="page-item">
                        <a th:if="${pageIndex} < ${totalPages}" class="page-link page-link-next" th:href="@{'?pageIndex=' + ${pageIndex + 1}}" aria-label="Next">
                            Next
                            <span aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
                                </svg>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </section>
    </div>
</body>
</html>